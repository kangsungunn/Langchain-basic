# LangChain 지식 베이스

## LangChain이란?

LangChain은 대규모 언어 모델(LLM)을 활용한 애플리케이션을 개발하기 위한 프레임워크입니다.
OpenAI의 GPT, Anthropic의 Claude 등 다양한 LLM을 쉽게 통합하고 사용할 수 있도록 도와줍니다.

## LangChain의 주요 기능

### 1. 프롬프트 템플릿
프롬프트를 템플릿으로 관리하여 재사용 가능하고 유지보수가 쉬운 코드를 작성할 수 있습니다.

### 2. 체인(Chains)
여러 개의 LLM 호출이나 작업을 연결하여 복잡한 작업을 수행할 수 있습니다.

### 3. 메모리(Memory)
대화 히스토리를 저장하고 관리하여 문맥을 유지하는 대화를 만들 수 있습니다.

### 4. 에이전트(Agents)
LLM이 도구를 사용하여 동적으로 작업을 수행할 수 있도록 합니다.

### 5. 벡터 스토어(Vector Stores)
문서를 임베딩으로 변환하여 저장하고, 유사도 검색을 통해 관련 정보를 찾을 수 있습니다.

## RAG (Retrieval-Augmented Generation)

RAG는 검색 증강 생성이라는 뜻으로, 외부 지식을 검색하여 LLM의 답변을 향상시키는 기술입니다.

### RAG의 작동 원리

1. 사용자 질문을 벡터로 변환
2. 벡터 데이터베이스에서 관련 문서 검색
3. 검색된 문서와 질문을 함께 LLM에 전달
4. LLM이 문서 기반으로 정확한 답변 생성

### RAG의 장점

- 최신 정보 활용: LLM의 학습 시점 이후 정보도 사용 가능
- 정확도 향상: 실제 문서를 참고하므로 환각(hallucination) 감소
- 출처 제공: 어떤 문서를 참고했는지 확인 가능
- 비용 효율: 전체 모델을 재학습하지 않아도 됨

## PGVector

PGVector는 PostgreSQL의 확장 기능으로, 벡터 데이터를 효율적으로 저장하고 검색할 수 있게 해줍니다.

### PGVector의 특징

- PostgreSQL의 안정성과 신뢰성 활용
- 기존 데이터베이스 인프라에 쉽게 통합
- 다양한 거리 측정 방식 지원 (L2, 코사인, 내적)
- 인덱싱을 통한 빠른 검색

## OpenAI Embeddings

OpenAI의 임베딩 모델은 텍스트를 고차원 벡터로 변환하는 모델입니다.

### text-embedding-3-small

- 차원: 1536
- 가격: $0.02 / 1M tokens
- 특징: 빠르고 저렴하며 대부분의 용도에 충분한 성능

### text-embedding-3-large

- 차원: 3072
- 가격: $0.13 / 1M tokens
- 특징: 더 높은 정확도가 필요한 경우 사용

## Docker와 컨테이너

Docker는 애플리케이션을 컨테이너로 패키징하여 어디서나 일관되게 실행할 수 있게 해주는 플랫폼입니다.

### Docker Compose

여러 컨테이너를 정의하고 실행하는 도구로, YAML 파일로 서비스를 설정합니다.

### 이 프로젝트의 구조

- langchain-app: Python 애플리케이션 컨테이너
- langchain-pgvector: PostgreSQL + PGVector 데이터베이스 컨테이너
- Docker 네트워크를 통해 두 컨테이너가 통신

## 벡터 유사도 검색

벡터 유사도 검색은 벡터 간의 거리나 각도를 계산하여 유사한 항목을 찾는 기술입니다.

### 거리 측정 방법

1. L2 거리 (유클리드 거리): 두 점 사이의 직선 거리
2. 코사인 유사도: 두 벡터 간의 각도 측정
3. 내적 (Dot Product): 두 벡터의 내적 값

### 활용 사례

- 유사 문서 찾기
- 추천 시스템
- 중복 제거
- 시맨틱 검색

